<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Đăng nhập</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
</head>
<body style="font-family: 'Inter', sans-serif;">
<div class="flex h-screen">
    <!-- Left image -->
    <!-- Left image (replaced with actual image) -->
    <div class="w-3/5 h-full">
        <img src="https://images.pexels.com/photos/590493/pexels-photo-590493.jpeg" alt="Ảnh minh họa đăng nhập" class="w-full h-full object-cover" />
    </div>


    <!-- Right form -->
    <div class="w-2/5 flex flex-col items-center justify-center bg-white  gap-2">
        <div class="w-[80%] h-[15%] flex items-center">
            <svg viewBox="0 0 80 80" class=" w-12 h-12 text-[#0e141b]" xmlns="http://www.w3.org/2000/svg">
                <!-- Dán toàn bộ nội dung <g> + <defs> SVG của bạn vào đây -->
                <g clip-path="url(#clip0_103_2)">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_103_2)">
                            <path d="M71.9994 70.667V78.667H10.666C8.54428 78.667 6.50945 77.8241 5.00916 76.3238C3.50887 74.8236 2.66602 72.7887 2.66602 70.667C2.66602 68.5453 3.50887 66.5104 5.00916 65.0101C6.50945 63.5098 8.54428 62.667 10.666 62.667H71.9994V70.667Z" fill="#F2F6FC"/>
                            <path d="M71.9993 4.00026V62.6669H10.666C8.54428 62.6669 6.50945 63.5098 5.00916 65.0101C3.50887 66.5104 2.66602 68.5452 2.66602 70.6669V9.33359C2.66602 7.21186 3.50887 5.17703 5.00916 3.67674C6.50945 2.17645 8.54428 1.33359 10.666 1.33359H69.3327C69.6849 1.32614 70.035 1.39002 70.3619 1.5214C70.6888 1.65277 70.9858 1.84892 71.2349 2.09804C71.484 2.34717 71.6802 2.64412 71.8115 2.97102C71.9429 3.29792 72.0068 3.64802 71.9993 4.00026Z" fill="#1175BC"/>
                            <path d="M10.666 1.3335C8.54428 1.3335 6.50945 2.17635 5.00916 3.67664C3.50887 5.17693 2.66602 7.21176 2.66602 9.3335V70.6668C2.66602 68.5451 3.50887 66.5103 5.00916 65.01C6.50945 63.5097 8.54428 62.6668 10.666 62.6668V1.3335Z" fill="#0D598F"/>
                            <path d="M77.3333 34.6667V40C77.3312 40.7066 77.0496 41.3836 76.55 41.8833C76.0503 42.3829 75.3733 42.6646 74.6667 42.6667H72V32H74.6667C75.3733 32.0021 76.0503 32.2837 76.55 32.7834C77.0496 33.283 77.3312 33.9601 77.3333 34.6667Z" fill="#F2F6FC"/>
                            <path d="M77.3333 24.0002V29.3335C77.3312 30.0401 77.0496 30.7171 76.55 31.2168C76.0503 31.7164 75.3733 31.9981 74.6667 32.0002H72V21.3335H74.6667C75.3733 21.3356 76.0503 21.6172 76.55 22.1169C77.0496 22.6165 77.3312 23.2936 77.3333 24.0002Z" fill="#CDD2E1"/>
                            <path d="M77.3333 13.3337V18.667C77.3312 19.3736 77.0496 20.0506 76.55 20.5503C76.0503 21.0499 75.3733 21.3315 74.6667 21.3337H72V10.667H74.6667C75.3733 10.6691 76.0503 10.9507 76.55 11.4504C77.0496 11.95 77.3312 12.6271 77.3333 13.3337Z" fill="#F2F6FC"/>
                            <path d="M59.9993 69.3337C60.7357 69.3337 61.3327 68.7367 61.3327 68.0003C61.3327 67.2639 60.7357 66.667 59.9993 66.667C59.263 66.667 58.666 67.2639 58.666 68.0003C58.666 68.7367 59.263 69.3337 59.9993 69.3337Z" fill="#DCE1EB"/>
                            <path d="M31.9993 44H47.9993C49.0602 44 50.0776 44.4214 50.8278 45.1716C51.5779 45.9217 51.9993 46.9391 51.9993 48C51.9993 49.0609 51.5779 50.0783 50.8278 50.8284C50.0776 51.5786 49.0602 52 47.9993 52H26.666C25.6051 52 24.5877 51.5786 23.8376 50.8284C23.0874 50.0783 22.666 49.0609 22.666 48C22.666 46.9391 23.0874 45.9217 23.8376 45.1716C24.5877 44.4214 25.6051 44 26.666 44H31.9993Z" fill="#E9EDF5"/>
                            <path d="M49.333 20V28C49.333 29.0609 48.9116 30.0783 48.1614 30.8284C47.4113 31.5786 46.3939 32 45.333 32H29.333C28.2721 32 27.2547 31.5786 26.5046 30.8284C25.7544 30.0783 25.333 29.0609 25.333 28V20C25.333 19.4748 25.4366 18.9548 25.6379 18.4697C25.8393 17.9847 26.1344 17.5441 26.5063 17.1733L26.6663 17.3333L37.333 25.3333L47.9997 17.3333L48.1597 17.1733C48.5316 17.5441 48.8267 17.9847 49.0281 18.4697C49.2294 18.9548 49.3331 19.4748 49.333 20Z" fill="white"/>
                            <path d="M45.3325 16C45.8577 16 46.3778 16.1036 46.8628 16.3049C47.3479 16.5063 47.7884 16.8014 48.1592 17.1733L47.9992 17.3333L37.3325 25.3333L26.6659 17.3333L26.5059 17.1733C26.8766 16.8014 27.3172 16.5063 27.8022 16.3049C28.2873 16.1036 28.8073 16 29.3325 16H45.3325Z" fill="white"/>
                            <path d="M49.333 20.3333V20C49.3331 19.4748 49.2294 18.9548 49.0281 18.4697C48.8267 17.9847 48.5316 17.5441 48.1597 17.1733L47.9997 17.3333L37.333 25.3333L26.6663 17.3333L26.5063 17.1733C26.1344 17.5441 25.8393 17.9847 25.6379 18.4697C25.4366 18.9548 25.333 19.4748 25.333 20V20.6067L37.333 29.3333L49.333 20.3333Z" fill="#94CDF5"/>
                            <path d="M26.6663 53.3337H47.9997C49.4142 53.3337 50.7707 52.7718 51.7709 51.7716C52.7711 50.7714 53.333 49.4148 53.333 48.0003C53.333 46.5858 52.7711 45.2293 51.7709 44.2291C50.7707 43.2289 49.4142 42.667 47.9997 42.667H26.6663C25.2519 42.667 23.8953 43.2289 22.8951 44.2291C21.8949 45.2293 21.333 46.5858 21.333 48.0003C21.333 49.4148 21.8949 50.7714 22.8951 51.7716C23.8953 52.7718 25.2519 53.3337 26.6663 53.3337ZM35.4477 45.3337L30.1143 50.667H27.2183L32.5517 45.3337H35.4477ZM42.1143 45.3337L36.781 50.667H33.885L39.2183 45.3337H42.1143ZM47.9997 50.667H47.2183L50.5663 47.319C50.6293 47.5408 50.6629 47.7698 50.6663 48.0003C50.6663 48.7076 50.3854 49.3858 49.8853 49.8859C49.3852 50.386 48.7069 50.667 47.9997 50.667ZM48.681 45.4337L43.4477 50.667H40.5517L45.885 45.3337H47.9997C48.2302 45.3372 48.4592 45.3708 48.681 45.4337ZM26.6663 45.3337H28.781L24.533 49.583C24.2362 49.1879 24.0555 48.7179 24.0113 48.2257C23.9671 47.7336 24.0611 47.2388 24.2829 46.7972C24.5046 46.3556 24.8451 45.9847 25.2662 45.7261C25.6873 45.4675 26.1722 45.3316 26.6663 45.3337Z" fill="#162C3C"/>
                            <path d="M78.6663 13.3335C78.6663 12.2727 78.2449 11.2552 77.4948 10.5051C76.7446 9.75496 75.7272 9.33353 74.6663 9.33353H73.333V4.0002C73.3485 3.47071 73.2556 2.94364 73.0601 2.45133C72.8645 1.95903 72.5705 1.51187 72.1959 1.1373C71.8213 0.762738 71.3742 0.468663 70.8819 0.273125C70.3896 0.0775871 69.8625 -0.0152887 69.333 0.000197017H10.6663C8.19185 0.00302017 5.81952 0.987257 4.0698 2.73699C2.32007 4.48671 1.33583 6.85904 1.33301 9.33353V70.6669C1.33583 73.1414 2.32007 75.5137 4.0698 77.2634C5.81952 79.0131 8.19185 79.9974 10.6663 80.0002H71.9997C72.3533 80.0002 72.6924 79.8597 72.9425 79.6097C73.1925 79.3596 73.333 79.0205 73.333 78.6669V44.0002H74.6663C75.7272 44.0002 76.7446 43.5788 77.4948 42.8286C78.2449 42.0785 78.6663 41.0611 78.6663 40.0002V34.6669C78.6629 33.6797 78.2921 32.7291 77.6263 32.0002C78.2921 31.2713 78.6629 30.3207 78.6663 29.3335V24.0002C78.6629 23.013 78.2921 22.0624 77.6263 21.3335C78.2921 20.6046 78.6629 19.6541 78.6663 18.6669V13.3335ZM74.6663 12.0002C75.02 12.0002 75.3591 12.1407 75.6092 12.3907C75.8592 12.6408 75.9997 12.9799 75.9997 13.3335V18.6669C75.9997 19.0205 75.8592 19.3596 75.6092 19.6097C75.3591 19.8597 75.02 20.0002 74.6663 20.0002H73.333V12.0002H74.6663ZM75.9997 24.0002V29.3335C75.9997 29.6872 75.8592 30.0263 75.6092 30.2763C75.3591 30.5264 75.02 30.6669 74.6663 30.6669H73.333V22.6669H74.6663C75.02 22.6669 75.3591 22.8073 75.6092 23.0574C75.8592 23.3074 75.9997 23.6466 75.9997 24.0002ZM3.99967 9.33353C4.00179 7.56607 4.70485 5.87161 5.95463 4.62182C7.20442 3.37204 8.89888 2.66898 10.6663 2.66686H69.333C69.5125 2.64925 69.6936 2.67164 69.8634 2.73242C70.0331 2.79319 70.1873 2.89085 70.3148 3.01836C70.4424 3.14587 70.54 3.30006 70.6008 3.46983C70.6616 3.6396 70.684 3.82074 70.6663 4.0002V61.3335H10.6663C9.42451 61.3319 8.19491 61.5787 7.04996 62.0596C5.90501 62.5405 4.86789 63.2456 3.99967 64.1335V9.33353ZM10.6663 77.3335C8.89823 77.3335 7.20254 76.6312 5.9523 75.3809C4.70205 74.1307 3.99967 72.435 3.99967 70.6669C3.99967 68.8988 4.70205 67.2031 5.9523 65.9528C7.20254 64.7026 8.89823 64.0002 10.6663 64.0002H70.6663V66.6669H65.333C64.9794 66.6669 64.6402 66.8073 64.3902 67.0574C64.1402 67.3074 63.9997 67.6466 63.9997 68.0002C63.9997 68.3538 64.1402 68.693 64.3902 68.943C64.6402 69.1931 64.9794 69.3335 65.333 69.3335H70.6663V72.0002H10.6663C10.3127 72.0002 9.97358 71.8597 9.72353 71.6097C9.47348 71.3596 9.33301 71.0205 9.33301 70.6669C9.33301 70.3132 9.47348 69.9741 9.72353 69.7241C9.97358 69.474 10.3127 69.3335 10.6663 69.3335H54.6663C55.02 69.3335 55.3591 69.1931 55.6092 68.943C55.8592 68.693 55.9997 68.3538 55.9997 68.0002C55.9997 67.6466 55.8592 67.3074 55.6092 67.0574C55.3591 66.8073 55.02 66.6669 54.6663 66.6669H10.6663C9.60548 66.6669 8.58806 67.0883 7.83791 67.8384C7.08777 68.5886 6.66634 69.606 6.66634 70.6669C6.66634 71.7277 7.08777 72.7451 7.83791 73.4953C8.58806 74.2454 9.60548 74.6669 10.6663 74.6669H70.6663V77.3335H10.6663ZM75.9997 40.0002C75.9997 40.3538 75.8592 40.693 75.6092 40.943C75.3591 41.1931 75.02 41.3335 74.6663 41.3335H73.333V33.3335H74.6663C75.02 33.3335 75.3591 33.474 75.6092 33.7241C75.8592 33.9741 75.9997 34.3132 75.9997 34.6669V40.0002Z" fill="#162C3C"/>
                            <path d="M29.3333 33.3337H45.3333C46.7478 33.3337 48.1044 32.7718 49.1046 31.7716C50.1048 30.7714 50.6667 29.4148 50.6667 28.0003V20.0003C50.6667 18.5858 50.1048 17.2293 49.1046 16.2291C48.1044 15.2289 46.7478 14.667 45.3333 14.667H29.3333C27.9188 14.667 26.5623 15.2289 25.5621 16.2291C24.5619 17.2293 24 18.5858 24 20.0003V28.0003C24 29.4148 24.5619 30.7714 25.5621 31.7716C26.5623 32.7718 27.9188 33.3337 29.3333 33.3337ZM48 28.0003C48 28.7076 47.719 29.3858 47.219 29.8859C46.7189 30.386 46.0406 30.667 45.3333 30.667H29.3333C28.6261 30.667 27.9478 30.386 27.4477 29.8859C26.9476 29.3858 26.6667 28.7076 26.6667 28.0003V20.0003C26.6697 19.6996 26.7238 19.4016 26.8267 19.119L36.5333 26.4003C36.7641 26.5734 37.0448 26.667 37.3333 26.667C37.6218 26.667 37.9025 26.5734 38.1333 26.4003L47.84 19.119C47.9428 19.4016 47.9969 19.6996 48 20.0003V28.0003ZM45.3333 17.3337C45.4675 17.3361 45.6012 17.349 45.7333 17.3723L37.3333 23.667L28.9333 17.3723C29.0655 17.349 29.1992 17.3361 29.3333 17.3337H45.3333Z" fill="#162C3C"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_103_2">
                                <rect width="80" height="80" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>

                </g>
                <defs>
                    <clipPath id="clip0_103_2">
                        <rect width="80" height="80" fill="white"/>
                    </clipPath>
                </defs>
            </svg>
        </div>




        <form id="loginForm" class="h-[85%] w-[80%] flex flex-col items-center gap-4">
            <h1 class="text-4xl font-bold text-[#0e141b] w-full mb-4 text-left">
                Đăng nhập
            </h1>
            <!-- Username -->
            <div class="mb-2 w-full">
                <label for="username" class="block text-base font-medium text-[#0e141b] mb-2">Tên đăng nhập</label>
                <input
                        id="username"
                        name="username"
                        type="text"
                        placeholder="Nhập tên đăng nhập"
                        required
                        class="w-full h-12 px-4 rounded-xl bg-[#e7edf3] text-[#0e141b] placeholder:text-[#4e7397] focus:outline-none border-none"
                />
            </div>

            <!-- Password -->
            <div class="relative mb-2 w-full">
                <label for="password" class="block text-base font-medium text-[#0e141b] mb-2">Mật khẩu</label>
                <input
                        id="password"
                        name="password"
                        type="password"
                        placeholder="Nhập mật khẩu"
                        required
                        class="w-full h-12 px-4 pr-12 rounded-xl bg-[#e7edf3] text-[#0e141b] placeholder:text-[#4e7397]  focus:outline-none border-none"
                />
                <button type="button" id="togglePassword"
                        class="absolute right-4 top-[70%] transform -translate-y-1/2 text-black focus:outline-none"
                >
                    <svg id="eyeIcon" width="24" height="24" fill="none"></svg>
                </button>
            </div>
            <div class="flex items-center justify-between mt-2 w-full ">
                <!-- Checkbox -->
                <div class="flex">
                    <input
                            id="isAdmin"
                            type="checkbox"
                            class="h-5 w-5 text-[#1980e6] border-[#d0dbe7] rounded focus:ring-0"
                    />
                    <label for="isAdmin" class="ml-3 text-sm text-[#0e141b] ">Bạn là quản trị viên?</label>
                </div>
                <!-- Quên mật khẩu -->
                <p class="text-sm font-bold text-center text-[#4e7397] underline">
                    <a href="forgot_password.html">Quên mật khẩu?</a>
                </p>
            </div>


            <!-- Submit -->
            <button
                    type="submit"
                    class="w-full h-12 bg-[#1175bc] hover:bg-[#166ec0] text-white  font-bold rounded-xl"
            >
                Đăng nhập
            </button>


            <!-- Thông báo -->
            <p id="message" class="text-sm text-center text-red-600 font-medium"></p>

            <!-- HOẶC -->
            <div class="w-full flex items-center gap-2">
                <div class="h-px flex-grow bg-gray-300"></div>
                <span class="text-sm text-[#4e7397]">HOẶC</span>
                <div class="h-px flex-grow bg-gray-300"></div>
            </div>

            <!-- Đăng ký -->
            <a
                    href="register.html"
                    class="w-full block text-center h-10 border border-[#d0dbe7] bg-white text-[#0e141b] rounded-xl font-bold hover:bg-slate-100 leading-10"
            >
                Đăng ký
            </a>


        </form>
    </div>
</div>

<!-- JavaScript -->
<script>
    if (window.location.href.includes("login.html")) {
      fetch("/api/con/check_session", { credentials: "include" })
        .then(res => res.json())
        .then(data => {
          if (data.status === "logged_in") {
            if (data.role === "admin") {
              window.location.href = "main_admin.html";
            } else {
              window.location.href = "main_user.html";
            }
          }
        });
    }

    const passwordInput = document.getElementById("password");
    const togglePassword = document.getElementById("togglePassword");
    const eyeIcon = document.getElementById("eyeIcon");

    let isVisible = false;

    function updateEyeIcon() {
     eyeIcon.innerHTML = isVisible
        ? `<path d="M15.58 12C15.58 13.98 13.98 15.58 12 15.58C10.02 15.58 8.42004 13.98 8.42004 12C8.42004 10.02 10.02 8.42004 12 8.42004C13.98 8.42004 15.58 10.02 15.58 12Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
           <path d="M12 20.27C15.53 20.27 18.82 18.19 21.11 14.59C22.01 13.18 22.01 10.81 21.11 9.39997C18.82 5.79997 15.53 3.71997 12 3.71997C8.46997 3.71997 5.17997 5.79997 2.88997 9.39997C1.98997 10.81 1.98997 13.18 2.88997 14.59C5.17997 18.19 8.46997 20.27 12 20.27Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>`
        : `<path d="M14.53 9.47004L9.47004 14.53C8.82004 13.88 8.42004 12.99 8.42004 12C8.42004 10.02 10.02 8.42004 12 8.42004C12.99 8.42004 13.88 8.82004 14.53 9.47004Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M17.82 5.76998C16.07 4.44998 14.07 3.72998 12 3.72998C8.46997 3.72998 5.17997 5.80998 2.88997 9.40998C1.98997 10.82 1.98997 13.19 2.88997 14.6C3.67997 15.84 4.59997 16.91 5.59997 17.77" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8.42004 19.5301C9.56004 20.0101 10.77 20.2701 12 20.2701C15.53 20.2701 18.82 18.1901 21.11 14.5901C22.01 13.1801 22.01 10.8101 21.11 9.40005C20.78 8.88005 20.42 8.39005 20.05 7.93005" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M15.5099 12.7C15.2499 14.11 14.0999 15.26 12.6899 15.52" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 2L14.53 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>`;
    }

    togglePassword.addEventListener("click", () => {
      isVisible = !isVisible;
      passwordInput.type = isVisible ? "text" : "password";
      updateEyeIcon();
    });

    updateEyeIcon();
</script>
<script src="script.js"></script>
</body>
</html>
