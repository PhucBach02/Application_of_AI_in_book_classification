<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Qu·∫£n l√Ω s√°ch</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link
            rel="stylesheet"
            as="style"
            onload="this.rel='stylesheet'"
            href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900"
    />
    <style>
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
          .material-icons {
            font-size: 28px;
        }
    </style>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body class="bg-slate-50" style="font-family: Inter, 'Noto Sans', sans-serif;">
<div class="min-h-screen flex flex-col items-center px-4 py-8">
    <div class="w-full max-w-7xl bg-white p-10 rounded-2xl shadow-lg">
        <div class="flex justify-between items-center mb-6">
            <!-- N√∫t hi·ªÉn th·ªã form th√™m s√°ch -->
            <div class="flex items-start flex-col">
                <div class="flex items-center space-x-2">
                    <button id="toggleAddFormBtn"
                            class="bg-[#1980e6] text-white font-bold py-2 px-6 rounded-xl hover:bg-[#166ec0] transition">
                        Th√™m s√°ch
                    </button>

                    <button id="uploadCsvBtn"
                            class="bg-[#1980e6] text-white font-bold py-2 px-6 rounded-xl hover:bg-[#166ec0] transition">
                        Th√™m s√°ch t·ª´ file
                    </button>

                    <!-- Input file ·∫©n -->
                    <input type="file" id="csvFileInput" accept=".csv" class="hidden" />
                </div>

                <!-- ‚úÖ N√∫t Th·ªëng k√™ n·∫±m NGAY D∆Ø·ªöI -->
                <button id="statsBtn"
                        class="mt-2 bg-[#1980e6] text-white font-bold py-2 px-6 rounded-xl hover:bg-[#1980e6] transition">
                    Th·ªëng k√™ s√°ch
                </button>
            </div>


            <div class="flex items-center gap-4">
                <div class="flex items-center gap-3 text-lg font-medium text-[#0e141b]">
                <div class="w-10 aspect-square bg-gray-200 rounded-full flex items-center justify-center">
            <span class="material-icons text-gray-700 text-xl">person</span>
            </div>
                <span id="readerName">Admin</span>
                </div>

                <button onclick="logout()" title="ƒêƒÉng xu·∫•t" class="w-10 aspect-square rounded-full flex items-center justify-center ">
                    <span class="material-icons text-[#1175bc] hover:text-red-600 transition text-3xl">logout</span>
                </button>
            </div>
        </div>
        <h1 class="text-3xl font-bold text-[#0e141b] text-center mb-10">QU·∫¢N L√ù S√ÅCH</h1>

        <div class="flex justify-center mb-4">
            <input
                    type="text"
                    id="searchInput"
                    placeholder="T√¨m s√°ch theo ti√™u ƒë·ªÅ, m√¥ t·∫£, t·ª´ kh√≥a..."
                    class="w-full max-w-md rounded-xl h-12 bg-[#e7edf3] p-3 text-[#0e141b] border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
        </div>





        

        <!-- Modal Form th√™m s√°ch -->
        <div id="addBookModal" class="fixed inset-0 bg-black/50 z-50 hidden justify-center items-center">
            <div class="bg-white w-full max-w-xl rounded-xl p-6 shadow-lg relative">
                <h2 class="text-xl font-bold mb-4">Th√™m s√°ch m·ªõi</h2>
                <form id="addBookForm" class="space-y-4">
                    <input type="text" id="title" placeholder="Ti√™u ƒë·ªÅ" required class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <textarea id="description" placeholder="M√¥ t·∫£" required class="w-full rounded-xl bg-[#e7edf3] p-3 h-24 resize-none"></textarea>
                    <div class="flex gap-2 items-center">
                        <input type="text" id="genre" placeholder="Nh·∫≠p th·ªÉ lo·∫°i" class="flex-1 rounded-xl h-12 bg-[#e7edf3] p-3 text-[#0e141b]" />
                        <button type="button" id="suggestGenreAI" class="h-12 px-4 rounded-xl bg-[#1980e6] text-white font-medium hover:bg-[#166ec0] transition">G·ª£i √Ω t·ª´ AI</button>
                    </div>
                    <div class="flex gap-2 items-center">
                        <input type="text" id="tags" placeholder="T·ª´ kh√≥a (c√°ch nhau b·∫±ng d·∫•u ph·∫©y)" class="flex-1 rounded-xl h-12 bg-[#e7edf3] p-3 text-[#0e141b]" />
                        <button type="button" id="suggestTagsAI" class="h-12 px-4 rounded-xl bg-[#1980e6] text-white font-medium hover:bg-[#166ec0] transition">G·ª£i √Ω t·ª´ AI</button>
                    </div>
                    <input type="text" id="targetAudience" placeholder="ƒê·ªëi t∆∞·ª£ng" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <input type="number" id="ageRange" placeholder="ƒê·ªô tu·ªïi ph√π h·ª£p (t·ªëi thi·ªÉu 5)" min="5" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <select id="difficulty" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3 text-[#0e141b]">
                        <option value="" disabled selected>Ch·ªçn ƒë·ªô kh√≥</option>
                        <option value="D·ªÖ">D·ªÖ</option>
                        <option value="Trung b√¨nh">Trung b√¨nh</option>
                        <option value="Kh√≥">Kh√≥</option>
                    </select>
                    <input type="url" id="imageUrl" placeholder="URL h√¨nh ·∫£nh" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <div class="flex justify-end gap-2 pt-4">
                        <button type="button" id="cancelAddBook" class="bg-gray-300 text-black px-4 py-2 rounded-xl hover:bg-gray-400">H·ªßy</button>
                        <button type="submit" class="bg-[#1980e6] text-white px-4 py-2 rounded-xl hover:bg-[#166ec0] font-bold">X√°c nh·∫≠n th√™m</button>
                    </div>
                </form>
                <button id="closeModal" class="absolute top-3 right-4 text-2xl text-gray-500 hover:text-black font-bold">&times;</button>
            </div>
        </div>

        <!-- Modal Chi ti·∫øt s√°ch -->
        <div id="bookDetailModal" class="fixed inset-0 bg-black/50 z-50 hidden justify-center items-center">
            <div class="bg-white w-full max-w-md max-h-[90vh] overflow-y-auto rounded-xl p-6 shadow-lg relative">
                <h2 id="detailTitle" class="text-xl font-bold mb-4"></h2>
                <img id="detailImage" src="" alt="" class="w-full h-60 object-contain rounded-md mb-4"/>
                <p><strong>M√¥ t·∫£ s√°ch:</strong></p>
                <p id="detailDescription" class="mb-2"></p>
                <p><strong>üìö Th·ªÉ lo·∫°i:</strong> <span id="detailGenre"></span></p>
                <p><strong>üè∑Ô∏è T·ª´ kh√≥a:</strong> <span id="detailTags"></span></p>
                <p><strong>üéØ ƒê·ªëi t∆∞·ª£ng:</strong> <span id="detailTargetAudience"></span></p>
                <p><strong>üë∂ ƒê·ªô tu·ªïi:</strong> <span id="detailAgeRange"></span></p>
                <p><strong>üí° ƒê·ªô kh√≥:</strong> <span id="detailDifficulty"></span></p>
                <div class="flex justify-between mt-4">
                    <button id="updateBookBtn" class="px-4 py-2 bg-yellow-400 rounded-xl hover:bg-yellow-500">C·∫≠p nh·∫≠t</button>
                    <button id="deleteBookBtn" class="px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600">X√≥a</button>
                    <button id="closeDetailBtn" class="px-4 py-2 bg-gray-300 rounded-xl hover:bg-gray-400">ƒê√≥ng</button>
                </div>
            </div>
        </div>




        <!-- Modal c·∫≠p nh·∫≠t s√°ch -->
        <div id="updateBookModal" class="fixed inset-0 bg-black/50 z-50 hidden justify-center items-center">
            <div class="bg-white w-full max-w-xl rounded-xl p-6 shadow-lg relative">
                <h2 class="text-xl font-bold mb-4">C·∫≠p nh·∫≠t s√°ch</h2>
                <form id="updateBookForm" class="space-y-4">
                    <input type="text" id="updateTitle" placeholder="Ti√™u ƒë·ªÅ" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <textarea id="updateDescription" placeholder="M√¥ t·∫£" class="w-full rounded-xl bg-[#e7edf3] p-3 h-24 resize-none"></textarea>

                    <!-- G·ª£i √Ω th·ªÉ lo·∫°i t·ª´ AI -->
                    <div class="flex gap-2 items-center">
                        <input type="text" id="updateGenre" placeholder="Th·ªÉ lo·∫°i" class="flex-1 rounded-xl h-12 bg-[#e7edf3] p-3" />
                        <button type="button" id="suggestUpdateGenreAI" class="h-12 px-4 rounded-xl bg-[#1980e6] text-white font-medium hover:bg-[#166ec0] transition">G·ª£i √Ω t·ª´ AI</button>
                    </div>

                    <!-- G·ª£i √Ω t·ª´ kh√≥a t·ª´ AI -->
                    <div class="flex gap-2 items-center">
                        <input type="text" id="updateTags" placeholder="T·ª´ kh√≥a" class="flex-1 rounded-xl h-12 bg-[#e7edf3] p-3" />
                        <button type="button" id="suggestUpdateTagsAI" class="h-12 px-4 rounded-xl bg-[#1980e6] text-white font-medium hover:bg-[#166ec0] transition">G·ª£i √Ω t·ª´ AI</button>
                    </div>


                    <input type="text" id="updateTargetAudience" placeholder="ƒê·ªëi t∆∞·ª£ng" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <input type="number" id="updateAgeRange" placeholder="ƒê·ªô tu·ªïi" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <select id="updateDifficulty" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3">
                        <option value="D·ªÖ">D·ªÖ</option>
                        <option value="Trung b√¨nh">Trung b√¨nh</option>
                        <option value="Kh√≥">Kh√≥</option>
                    </select>
                    <input type="url" id="updateImageUrl" placeholder="URL h√¨nh ·∫£nh" class="w-full rounded-xl h-12 bg-[#e7edf3] p-3" />
                    <div class="flex justify-end gap-2 pt-4">
                        <button type="button" id="cancelUpdateBtn" class="bg-gray-300 text-black px-4 py-2 rounded-xl hover:bg-gray-400">H·ªßy</button>
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-700">C·∫≠p nh·∫≠t</button>
                    </div>
                </form>
                <button id="closeUpdateModal" class="absolute top-3 right-4 text-2xl text-gray-500 hover:text-black font-bold">&times;</button>
            </div>
        </div>

        <!-- Ph·∫£n h·ªìi -->
        <div id="post-response" class="text-sm text-center text-green-600 font-medium mb-6"></div>

        <!-- üìä Modal Th·ªëng k√™ S√°ch -->
        <div id="bookStatsModal" class="fixed inset-0 bg-black/50 z-50 hidden justify-center items-center">
            <div class="bg-white w-full max-w-2xl max-h-[80vh] overflow-y-auto rounded-xl p-6 shadow-lg relative">
                <button id="closeStatsBtn" class="absolute top-3 right-4 text-2xl text-gray-500 hover:text-red-600 font-bold">&times;</button>
                <h3 class="text-2xl font-bold mb-4 text-center">üìä Th·ªëng k√™ s√°ch</h3>
                <p id="totalBooks" class="font-semibold mb-4">T·ªïng s·ªë s√°ch: ...</p>
                <div id="genreStats" class="space-y-4"></div>
            </div>
        </div>




        <!-- Danh s√°ch s√°ch -->
        <h2 class="text-xl font-semibold text-[#0e141b] mb-3">Danh s√°ch s√°ch</h2>
        <div id="bookList" class="grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 auto-rows-auto min-h-[600px]"></div>

        <div class="w-full flex flex-col gap-2 mt-8">
            <!-- Thanh ƒëi·ªÅu khi·ªÉn -->
            <div class="flex justify-between items-center w-full">
                <div></div> <!-- placeholder tr√°i, n·∫øu mu·ªën th√™m g√¨ sau n√†y -->

                <!-- N√∫t ph√¢n trang ·ªü gi·ªØa -->
                <div id="pagination" class="flex flex-wrap justify-center gap-2"></div>

                <!-- Dropdown b√™n ph·∫£i -->
                <div class="flex items-center gap-2">
                    <label for="booksPerPageSelect" class="text-gray-700 whitespace-nowrap">S√°ch m·ªói trang:</label>
                    <select id="booksPerPageSelect" class="border rounded px-8 py-2 text-gray-700">
                        <option value="8">8</option>
                        <option value="12">12</option>
                        <option value="20">20</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
</div>



<script src="main_admin_manager.js"></script>
<script src="auth.js"></script>

</body>
<script>
    const openModalBtn = document.getElementById("toggleAddFormBtn");
    const modal = document.getElementById("addBookModal");
    const closeModalBtn = document.getElementById("closeModal");
    const cancelBtn = document.getElementById("cancelAddBook");

    openModalBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    });

    closeModalBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });

    cancelBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });

    // ƒê√≥ng modal khi click ra ngo√†i v√πng form
    window.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.add("hidden");
      }
    });
     // ===== X·ª≠ l√Ω ƒë√≥ng modal chi ti·∫øt s√°ch =====
  const bookDetailModal = document.getElementById("bookDetailModal");
  const closeDetailBtn = document.getElementById("closeDetailBtn");

  closeDetailBtn.addEventListener("click", () => {
    bookDetailModal.classList.add("hidden");
  });

  window.addEventListener("click", (e) => {
    if (e.target === bookDetailModal) {
      bookDetailModal.classList.add("hidden");
    }
  });
</script>
</html>